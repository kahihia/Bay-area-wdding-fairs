{% load url from future %}
{% load static %}
<!doctype html>
<html lang="en">
<head>
{#    {% cache 5000 base_head %}#}
    <meta charset="utf-8">
    <script src="{% static "js/jquery.min.js" %}"></script>
    {% if not jquery_min %}
        <script type="text/javascript"  src="{% static 'js/bootstrap.min.js' %}"></script>
    {% endif %}
    <script src="{% static 'js/bootbox.min.js' %}"></script>
    <script src="{% static 'js/jquery.yapjoy.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/pager.css' %}"/>
    {% block tags %}{% endblock tags %}
    <script type="text/javascript" src="{% static 'js/jquery.ba-bbq.js' %}"></script>
    <title>YapJoy - An Intelligent Way to Plan Stress Free Wedding online</title>
    <!-- patch1 -->
    <link rel="icon" href="{% static 'images/favicon.png' %}" type="image/png" sizes="32x32">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- patch4 -->
    <meta name="description" content="An Intelligent Way to Plan Stress Free Wedding online">
    <meta name="keywords"
          content="Wedding,bride,groom,wedding planners,venues,caterers,yapjoy,bayareawedding,wedding fairs">
    <meta name="author" content="yapjoy">

    <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
    <!-- patch4 -->

    <link rel="stylesheet" type="text/css" href="{% static "font-awesome-4.4.0/css/font-awesome.min.css" %}" media="all">
    <link href={% static "css/styles.css" %} rel="stylesheet" type="text/css" media="all"/>
    <link href="{% static 'css/chosen.css' %}" rel="stylesheet" type="text/css" media="all"/>
{#    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" media="all"/>#}
{#    {% endcache base_head %}#}
    {% block header_tags %}{% endblock header_tags %}
    <!-- Load the JS for the chat window and start retrieving messages. -->
<script type="text/javascript" src="/static/jqchat/jqchat.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		InitChatWindow("{% url 'jqchat_test_window_with_description_ajax' room.id %}", HandleRoomDescription);
		// Initialise the custom code to POST new descriptions.
{#		InitChatDescription();#}
	});
</script>
<style type="text/css">
	/* Example styling for the chat window */
   #chatwindow {
     height: 250px;
     width: 400px;
     border: 1px solid;
     padding: 5px;
     margin: 10px 0;
     overflow: auto;
     background-color: white;
     float: left;
   }
   #memberswindow {
     height: 250px;
     width: 100px;
     border: 1px solid;
     padding: 5px;
     margin: 10px 0;
     overflow: auto;
     background-color: white;
     float: left;
   }
 .clear{
     clear: both;
   }
</style>
</head>
<body >
<div id="chat_left_col">
	<h1>Test Chat Client</h1>
	
	<p>This is a demo of the <a href="http://code.google.com/p/django-jqchat/">
	django-jqchat chat client</a>.</p>
	<p>This page shows how the basic chat client can be extended: the extra field
	<em>room description</em> can be updated from the client window and sent as part
	of the chat client messages. Likewise, updates to the <em>room description</em>
	elsewhere are piggybacked on to the ajax messages received from the server.</p>
	<p>For the basic client,
	<a href="{% url 'jqchat_test_window' room.id %}">see here</a>.</p>
	<p>There are 2 rooms in this demo,
	<a href="{% url 'jqchat_test_window' 1 %}">here</a> and 
	<a href="{% url 'jqchat_test_window' 2 %}">here</a>.</p>
</div>

<h2>Room name: {{ room }}</h2>
<h2>Room description: <span id="chatroom_description"></span></h2>

<div id="chatwindow"><span id="loading">Loading...</span></div>
<div id="memberswindow"></div>
<div class="clear"></div>
<form id="chatform">
	<label for="msg">Message:</label>
	<input type="text" id="msg" />
	<input type="submit" value="Send message" /><br />
</form>

<form id="chatroom_description_form" method="post" action="">
	<label for="id_description">Room description:</label>
	<input id="id_description" type="text" name="description" maxlength="100" />
	<input type="submit" value="Update room description" />
</form>

<script type="text/javascript">document.getElementById("msg").focus();</script>

</body>

