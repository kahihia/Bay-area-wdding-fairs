{% extends "vendroid/base.html" %}
{% load pagination_tags %}
{% load static %}
{% load myfilters %}
{% load humanize %}
{% block content %}
{#    <script src="{% static "js/bootstrap.min.js" %}"></script>#}
{#    <script src="{% static "js/jquery-ui.min.js" %}"></script>#}
{##}
{#    <script src="{% static "vendroid/plugins/daterangepicker/daterangepicker.js" %}"></script>#}
    <link href={% static "css/jquery.datetimepicker.css" %} rel="stylesheet" type="text/css" media="all"/>
    <link href={% static "css/chosen.css" %} rel="stylesheet" type="text/css" media="all"/>
    <script type="text/javascript" src="{% static "js/jquery.datetimepicker.js" %}"></script>
    <script>
    $(function () {
            $('#id_wedding_date').datepicker();
{#            $("#id_wedding_date").datetimepicker({#}
{#             'showTimepicker': false,#}
{#            });#}
        });
    </script>

{#    <link href="{% static "vendroid/plugins/tagsInput/jquery.tagsinput.css" %}" rel="stylesheet" type="text/css">#}
{#    <link href="{% static "vendroid/plugins/bootstrap-switch/bootstrap-switch.css" %}" rel="stylesheet" type="text/css">#}
{#    <link href="{% static "vendroid/plugins/daterangepicker/daterangepicker-bs3.css" %}" rel="stylesheet" type="text/css">#}
{#    <link href="{% static "vendroid/plugins/bootstrap-timepicker/bootstrap-timepicker.min.css" %}" rel="stylesheet" type="text/css">#}
{#    <link href="{% static "vendroid/plugins/colorpicker/css/colorpicker.css" %}" rel="stylesheet" type="text/css">#}


<!-- Specific Page Scripts Put Here -->

<script type="text/javascript" src='plugins/jquery-ui/jquery-ui.custom.min.js'></script>
    <style>
    .red {
        color: red;
    }
    textarea {
        height: 80px;
    }
    .btn-brown {
        background-color: #ba8c00 !important;
    }
    </style>
    <div class="vd_body">
        <!-- Header Start -->
       {% include "vendroid/partial/_header.html" %}
        <!-- Header Ends -->
        <div class="content">
            <div class="container">
                {% include "vendroid/partial/_sidebar.html" %}

                <!-- Middle Content Start -->

               <div class="vd_content-wrapper">
      <div class="vd_container">
        <div class="vd_content clearfix">

          <!-- vd_head-section -->

          <div class="clearfix">

          <!-- vd_title-section -->

          <div class="vd_content-section clearfix">

            <div class="row">
              <div class="col-md-12">
                <div class="panel widget">
                  <div class="panel-body">
{#                    <h2>Nav <span class="font-semibold">Tabs</span></h2>#}
{#                    <ul class="nav nav-tabs">#}
{##}
{##}
{#                    </ul>#}
                    <br>
                    <div class="tab-content mgbt-xs-20">
                         {% if successMessage %}
                    <div class="flashes">
                        <div class="alert alert-success">{{ successMessage }}</div>
                    </div>
                    {% endif %}
                      <div class="tab-pane active" id="privacy">
{#                          <div class="col-md-12 text-center">#}
{#                              <img src="http://bayareaweddingfairs.com/wp-content/uploads/2016/01/logo-new-02.png" width="20%" /><br />#}
{#                              <div class="clearfix"></div>#}
{#                              <br />#}
{#                              <h3 style="color: #ba8c00;">INVOICES</h3>#}
{#                              <img src="http://bayareaweddingfairs.com/wp-content/themes/wedding-wp/images/rose/floral.png"  />#}
{#                              <hr />#}
{##}
{#                          </div>#}
                          <div class="col-sm-12">
                <div class="panel widget light-widget">
                  <div class="panel-body" style="padding:40px;">
{#                    <div class="pull-right text-right">#}
{#                      <h3 class="font-semibold mgbt-xs-20">INVOICE</h3>#}
{#                      <table class="table table-bordered">#}
{#                        <tbody><tr>#}
{#                          <th>Invoice No.</th>#}
{#                          <th>Date</th>#}
{#                        </tr>#}
{#                        <tr>#}
{#                          <td>YJI-{{ invoice.id }}</td>#}
{#                          <td>{{ today }}</td>#}
{#                        </tr>#}
{#                      </tbody></table>#}
{#                    </div>#}
                    <div class="mgbt-xs-20 text-center"><img style="width: 200px;" alt="logo" src="http://bayareaweddingfairs.com/wp-content/uploads/2016/01/logo-new-02.png"></div>
{#                    <address class="text-center">#}
{#                    2600 Kitty Hawk Road, suite #110<br>#}
{#                    Livermore, CA 94551<br>#}
{#                    <abbr title="Phone">P:</abbr> (510) 593-4426<br>#}
{#                    <br>#}
{#                    info@bayareaweddingfairs.com#}
{#                    </address>#}
{#                    <hr>#}
{#                    <br>#}
                    <div class="">
                      <div class="row">
                        <div class="col-xs-12">

                            {% if event.image %}<h3 class="text-center"><img src="{{ event.image }}" width="400px;" height="100%" /></h3>{% endif %}
                            <h3 class="text-center">{{ event.name }}</h3>
                            {% if event.description %}<div class="text-center">{{ event.description|safe }}</div>{% endif %}
{#                          <address>#}
{#                          <strong>Bill To:</strong><br>#}
{#                          {{ invoice.user.get_full_name }}<br>#}
{#                          {{ company.name }}<br>#}
{#                          {{ profile.phone }}#}
{#                          </address>#}
                        </div>
{#                        <div class="col-xs-4">#}
{#                            &nbsp;#}
{#                          <address>#}
{#                          <strong>Ship To:</strong><br>#}
{#                          John Doe<br>#}
{#                          795 Folsom Ave, Suite 600<br>#}
{#                          San Francisco, CA 94107<br>#}
{#                          </address>#}
{#                        </div>#}
{#                        <div class="col-xs-2">#}
{#                            &nbsp;#}
{#                          <address>#}
{#                          <strong>Due Date:</strong><br>#}
{#                          24 July 2013#}
{#                          </address>#}
{#                        </div>#}
{#                        <div class="col-xs-3">#}
{#                          <div class="text-right">#}
{#                          <strong>Due Balance:</strong><br>#}
{#                          <span class="mgtp-5 vd_green font-md">${{ invoice.amount|intcomma }}</span>#}
{#                          </div>#}
{#                        </div>#}
                      </div>
                    </div>
                    <table class="table table-condensed table-striped">
                      <thead>
                        <tr>
                          <th class="text-center" style="width:20px;">QTY</th>
                          <th>DESCRIPTION</th>
                          <th class="text-right" style="width:120px;">UNIT PRICE</th>
                          <th class="text-right" style="width:120px;">TOTAL</th>
                        </tr>
                      </thead>
                      <tbody>
                      {% for invoice in invoice.invoice_event.all %}
                        <tr>
                          <td class="text-center">1</td>
                          <td><b>Event:</b> {{ invoice.registered_event.event.name }}<br /><b>Notes:</b> {{ invoice.notes }}</td>
                          <td class="text-right">${{ invoice.amount|intcomma }}</td>
                          <td class="text-right">${{ invoice.amount|intcomma }}</td>
                        </tr>
                      {% endfor %}
{#                        <tr>#}
{#                          <td class="text-center">1</td>#}
{#                          <td>Prize</td>#}
{#                          <td class="text-right">${{ invoice.prize|intcomma }}</td>#}
{#                          <td class="text-right">${{ invoice.prize|intcomma }}</td>#}
{#                        </tr>#}
                      </tbody>
                      <tfoot>
                        <tr>
                          <th colspan="2" rowspan="3" class="bdr">Note:<br />
                              {% if invoice.prize >= 0 %}Prize: ${{ invoice.prize|intcomma }}{% endif %}
                            <p class="font-normal">&nbsp;</p></th>
                          <th class="text-right pd-10">Sub Total</th>
                          <th class="text-right pd-10">${{ invoice.amount|intcomma }}</th>
                        </tr>
{#                        <tr>#}
{#                          <th class="text-right  pd-10 no-bd">&nbsp;</th>#}
{#                          <th class="text-right  pd-10 vd_red no-bd">&nbsp;</th>#}
{#                        </tr>#}
{#                        <tr>#}
{#                          <th class="text-right  pd-10 no-bd">&nbsp;</th>#}
{#                          <th class="text-right  pd-10 no-bd">&nbsp;</th>#}
{#                        </tr>#}
{#                        <tr>#}
{#                          <th colspan="2">Thank you for your business. Please remit the total amount due within 30 days.</th>#}
{#                          <th class="text-right  pd-10">Total</th>#}
{#                          <th class="text-right  pd-10 "><span class="vd_green font-sm font-normal">${{ invoice.amount|intcomma }}</span></th>#}
{#                        </tr>#}
                      </tfoot>
                    </table>
                      <div class="col-md-3 col-md-offset-9 pull-right">
                          <div class="col-md-12 pull-right" style="padding-right: 0px;">
                              {% if not invoice.status == "Paid" %}
                              <form action="" method="post" id="invoice-form">
                                  {% csrf_token %}
                                  <input hidden id="stripe_token" name="stripe_token" />
                                  Card No: {{ form.number }}
                                  <div style="color: red;">{{ form.number.errors.0 }}</div>
                                  Expiry: {{ form.month }}{{ form.month.errors }} {{ form.year }}{{ form.year.errors }}
    {#                              <br/>#}
                                  {{ form.agree }} I agree to the <a data-toggle="modal" href="#agreement">terms and conditions</a><div style="color: red;">{{ form.agree.errors.0 }}</div><div style="color: red;" id="stripe-error-message"></div><br />
                                  <button class="btn vd_btn pull-right btn-brown" id="submit-invoice">Pay Now</button>
{#                                  <a class="btn vd_btn  btn-default" style="margin-right: 15px;" href="{% url "event_invoice_detail" invoice.id %}">Cancel</a></div>#}
                              </form>
                          {% else %}
                                  <p class="text-center pull-right" style="color: green;"><b>This invoice was paid successfuly.</b></p>
                          {% endif %}
                          <div class="clearfix"></div>
                      </div>
                  </div>
                  <!-- panel-body -->

                </div>
                <!-- Panel Widget -->
              </div>

                          </div>

                      </div>
                    </div>
                    <br><br>









                  </div>
                </div>
                <!-- Panel Widget -->
              </div>
              <!-- col-md-6 -->

            </div>
            <!-- row -->

          </div>
          <!-- .vd_content-section -->

        </div>
        <!-- .vd_content -->
      </div>
      <!-- .vd_container -->
    </div>
                    <!-- .vd_container -->
                </div>
                <!-- .vd_content-wrapper -->

                <!-- Middle Content End -->

            </div>
            <!-- .container -->

        <!-- .content -->

        <!-- Footer Start -->
        <footer class="footer-1" id="footer">
            <div class="vd_bottom ">
                <div class="container">
                    <div class="row">
                        <div class=" col-xs-12">
                            <div class="copyright">
                                Copyright &copy;2015 YapJoy Inc. All Rights Reserved
                            </div>
                        </div>
                    </div>
                    <!-- row -->
                </div>
                <!-- container -->
            </div>
        </footer>
        <!-- Footer END -->


    </div>

<!-- Modal -->
    <div class="modal fade" id="agreement" tabindex="-1" role="dialog" aria-labelledby="Agreement" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header vd_bg-blue vd_white">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i
                            class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="myModalLabel">Bay Area Wedding fairs Agreement</h4>
                </div>
                <div class="modal-body">
                    <h3 class="text-center">Terms and Conditions</h3>
                    <h4>Deposits & Payments</h4>
                    <p>A deposit is required to hold a space in any Bay Area Wedding Fairs (BAWF) trade shows. All deposits are Non-Refundable
                    and Final. If you signed for multiple shows, deposits for all contracted shows must be received to hold space.</p>
                     <h4>Cancellations and Refunds</h4>
                    <p>Deposits are non refundable. If cancelled within 30 days of the show, full balance is due. If a Fashion Show sponsor or Stage
                    Services Provider cancels, the list price is due. To recieve the Brides'/Grooms' List, you must be present at the entire show.</p>
                     <h4>Confidentiality Agreement</h4>
                    <p>Booth pricing is category specific. This contract is a confidential document between BAWF and the exhibitor. A breach of the
                    contract confidentiality agreement will result in this contract reverting to list price.</p>
                     <h4>Booth Staffing & Operations</h4>
                    <p>The booth must be staffed throughout the duration of the show. The booth can not be shared. Displaying advertisements for
                    business not listed on this contract is prohibited. Promoting your business outside the boundary of your assigned booth is not
                    allowed. Intoxication during the show hours is also not permitted. Refusal to comply with these terms will result in removal
                    from the show without refund.</p>
                     <h4>Setup</h4>
                    <p>Booth placements are entire discretion of BAWF. Booths are to be completely set-up 30 minutes prior to the start of the show.
                    Late arrival will result in loss of booth space without refund. No pricing displayed on banners, backdrops, and posters allowed.</p>
                     <h4>Tear Down</h4>
                    <p>Tear down prior to the end of the show will result in  $100 fee. Tear must start as soon as the show ends and must be
                    completed within an hour.</p>
                     <h4>BAWF Rights, Indemnities and Limitations</h4>
                    <p>All exhibitors must adhere completely by these terms and conditions and our policies and procedures at all times. Anyone not adhering to
                        these terms will be asked to leave our shows immediately without refund. The exhibitor agrees to indemnify and hold
                        harmless BAWF and BAWF assumes no liability, and offers no compensation of any kind for injury or loss or personal
                        or property damage as a result of participating in this (or any) show. Exhibitors agree to use
                        their own Business Liability Insurance for remedy in such cases. BAWF reserves all these above rights at all times.</p>

                </div>
                <div class="modal-footer background-login">
{#                    <button type="button" class="btn vd_btn vd_bg-grey" data-dismiss="modal">Close</button>#}
                    <button type="button" class="btn vd_btn vd_bg-green" data-dismiss="modal">I Agree</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->

  <script src="{% static "js/chosen.jquery.min.js" %}"></script>

    <script type="text/javascript">
{#    {% if not invoice.status == "Paid" %}#}
{#        $(document).ready(function(){#}
{#            $('#agreement').modal('show');#}
{#        })#}
{#    {% endif %}#}
    </script>


{% endblock content %}
{% block script %}

<script src="https://js.stripe.com/v1/" type="text/javascript"></script>
<script>


{#     {% if not is_customer %}#}
        // alert('working');
        Stripe.setPublishableKey('pk_test_ic11SWVPcUHwZ1mDBEBTdSX1');
        $('#submit-invoice').on('click',function (event) {
            event.preventDefault();
            $('#submit-invoice').attr('disabled', true);
            //alert('submit');
            $("#stripe-error-message").html("");
            if ($("#id_number").length == 1) {
                // alert('inside');
                var form = this;
                var card = {
                    number: $("#id_number").val(),
                    expMonth: $("#id_month").val(),
                    expYear: $("#id_year").val(),
{#                    cvc: $("#id_verification_value").val()#}
                };
                //console.log(card);
                Stripe.card.createToken(card, function (status, response) {
                    if (status === 200) {
                        console.log(status, response);
                        //jQuery("#credit-card-errors").hide();
                        //jQuery("#last_4_digits").val(response.card.last4);
                        $("#stripe_token").val(response.id);
                        //jQuery('#setupPayment').prop('disabled', false);
{#                        $('#submit-invoice').removeAttr('disabled');#}
                        $('#invoice-form').submit();
                    } else {
                        console.log(response.error);
                        console.log(response.error.param);
                        $("#stripe-error-message").text(response.error.message);
                        $('#submit-invoice').removeAttr('disabled');
                    }
                });
                return false;
            }
            return true;
        });
{#        {% endif %}#}
    {% if redirect %}
        parent.window.location.href = '/dashboard/';
    {% endif %}

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68785620-1', 'auto');
  ga('send', 'pageview');

</script>

{% endblock script %}