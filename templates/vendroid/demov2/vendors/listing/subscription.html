{% extends "vendroid/demo/base.html" %}
{% load static %}
{% load humanize %}
{% load myfilters %}
{% block tags %}
{% endblock %}
{% block content %}
    <style>
        .fa {
            font-size:20px;
            color: grey;
        }
        .fa-pencil-square-o {
            font-size:35px !important;
        }
        {#                div.panel-heading.vd_bg-green.vd_bd-green {#}
        {#                    background-color: white !important;#}
        {#                    color: black !important;#}
        {#                    border: 1px grey solid !important;#}
        {#                }#}
        {#                div.panel-heading.vd_bg-green.vd_bd-green a{#}
        {#                    color: grey !important;#}
        {#                }#}
        .yelpSaveButton {
            margin-bottom:15px;
        }
        .image-cropper {
            max-width: 110px;
            min-width: 110px;
            max-height: 110px;
            min-height: 110px;
        {#            position: relative;#}
        {#            overflow: hidden;#}
        {#            border-radius: 50%;#}
        {#            background: #eee no-repeat center;#}
        {#            background-size: cover;#}
        {#            border-color: darkgray;#}
        }
        #profile-image-id img:hover {
            content: url('{% static "images/vendorProfile/Stock_Profile_Picture.png" %}');
            cursor: pointer;
        {#             position:absolute;#}
        {#               left:50% ;#}
        {#             right: 50% ;#}
        {#            opacity:0.5;#}
        {#             margin-top:    -111px;#}
        {#             margin-left: -106px;#}
        {#            z-index:15;#}
        }
        .images-mobile {
            width: 120px;
            min-width: 120px;
            max-height: 120px;
            min-height: 120px;
            /* overflow: hidden; */
            /* position: relative; */
            max-width: 120px;
        }
        .panel {
            border:none !important;
            border-radius:none !important;
        }
        .blue-button {
            background-color: #07A6C3;
            color: white;
        {#            border-radius: 20px;#}
            margin-top: 10px;
            width: 80%;
            height: 60px;
            line-height: 26px;
        }
        {#        ul.tab {#}
        {#            list-style-type: none;#}
        {#            margin: 0;#}
        {#            padding: 0;#}
        {#            overflow: hidden;#}
        {#            border: 1px solid #ccc;#}
        {#            background-color: #f1f1f1;#}
        {#        }#}
        {##}
        {#        /* Float the list items side by side */#}
        {#        ul.tab li {float: left;}#}
        {##}
        {#        /* Style the links inside the list items */#}
        {#        ul.tab li a {#}
        {#            display: inline-block;#}
        {#            color: black;#}
        {#            text-align: center;#}
        {#            padding: 14px 16px;#}
        {#            text-decoration: none;#}
        {#            transition: 0.3s;#}
        {#            font-size: 17px;#}
        {#        }#}
        {##}
        {#        /* Change background color of links on hover */#}
        {#        ul.tab li a:hover {#}
        {#            background-color: #ddd;#}
        {#        }#}
        {##}
        {#        /* Create an active/current tablink class */#}
        {#        ul.tab li a:focus, .active {#}
        {#            background-color: #ccc;#}
        {#        }#}

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }
        {#        .social_icons_style {#}
        {#                width: 20%;#}
        {#                padding:0px;#}
        {#                display: inline;#}
        {#                margin-top:15px;#}
        {#                align:center;#}
        {#                width: 60% !important;#}
        {#                align: center;#}
        {#            }#}
        .mb-content-wrapper-child {
            min-height: 931px;
            margin-top:50px;
        }
        .form-wizard .nav > li.active .menu-icon {
            background: #07A6C3;
        }
        .panel-group .panel+.panel {
            margin-top:0px;
        }
        .progress-img {
            width: 50%;
        }
        .modal {
            width: 98%;
        }
        @media only screen and (max-width: 500px) {
            .yelpSaveButton {
                margin-bottom:0px;
            }
            .blue-button {
                background-color: #07A6C3;
                color: white;
            {#            border-radius: 20px;#}
                margin-top: 10px;
                width: 300px;
                height: 60px;
                line-height: 26px;
            }
            .images-mobile {
                width:100%;
                max-width:100%;
                max-height:120px;
                min-height:120px;
            {#            height:auto;#}
                overflow: hidden;
                position: relative;
            }
            .progress-img {
                width: 100%;
            }
            .mb-panel-col-md-8 {
                padding-left:0px;
                padding-right:0px;
            }
            .panel{
            {#                border:none !important;#}
            }

            .mb-content-wrapper-child {
                margin-top:0px;
            }
            .mb-panel-body{
                padding:0px !important;
            }
            .mb-row {
                margin-left: -17px !important;
                margin-right: -17px !important;

            }
            .nav-justified {
                width: 100%;
            }
            .nav-justified > li {
            {#  float: left;#}
                display: table-cell;
            }
            .yelp-heading {
                font-size: 18px;
            }
            .mb-col-xs-12 {
                padding:0px;
            }
            .image-cropper {
                width: 70px;
                height: 70px;
                max-height: 70px;
                min-height: 70px;
                max-width:70px;
                min-width:70px;
            {#            position: relative;#}
            {#            overflow: hidden;#}
            {#            border-radius: 50%;#}
            {#            background: #eee no-repeat center;#}
            {#            background-size: cover;#}
            {#            border-color: darkgray;#}
            }
            .company__fonts {
                font-size: 16px;
            }
            .social_icons_style {
                width: 20%;
                padding:0px;
                display: inline;
                margin-top:15px;
            }



        }

        {#   ul.experiences li {#}
        {#    padding-left: 33px;#}
        {#    margin-bottom: 2.5em;#}
        {#    list-style: none;#}
        {#    background: url('../img/misc/list-bullet-darkgray.png') no-repeat;#}
        {#    border-left: 1px solid #yourcolor;#}
        {# } #}
        {#    @import "compass/css3";#}



    </style>

    <script type="text/javascript" src="{% static "vendroid/js/jquery.js" %}"></script>
    <script>
        function resizeIframe(obj) {
            var hei = obj.contentWindow.document.body.scrollHeight;// + 400;
            obj.style.height = hei + 'px';
        }
    </script>
    {#    <script src="{% static 'js/chosen.jquery.min.js' %}"></script>#}
    <div class="vd_body">
        {% include "vendroid/demo/_partial/_header_vendors.html" %}

        <div class="content">
            <div class="container">



                <div class="vd_content-wrapper" style="min-height: 931px;">
                    <div class="mb-content-wrapper-child" >
                        <div class="vd_content clearfix"></div>
                        <!--Main panel-->
                        <div class="row mb-row">
                            <div class="col-md-4 col-md-offset-4 mb-panel-col-md-8">
                                <div class="panel" >
                                    <div class="panel-body mb-panel-body" >
                                       <form id="invoice-form" action="" method="post">
                                           {% csrf_token %}
                                        <div class="col-md-12">
                                            <h4 >
                                                {#                                            <span style="color: #07A6C3;">Invoice Details</span> #}
                                                <span style="color: #07A6C3;"> Payment Details</span></h4>
                                        </div>
                                        <hr />
                                           <input hidden id="stripe_token" name="stripe_token" />
                                        <div class="form-group col-md-12">

                                            CARD NUMBER<span style="color: red;">*</span>
                                            {{ form.number }}
                                            {{ form.number.errors }}
                                            <span id="stripe-error-message" style="color: red;"></span>
                                            {% if error_message %}<span style="color: red;">{{ error_message }}</span>{% endif %}
                                        </div>
                                        <div class="form-group col-md-6">
                                            MONTH<span style="color: red;">*</span>
                                            {{ form.month }}
                                            {{ form.month.errors }}
                                        </div>
                                        <div class="form-group col-md-6">
                                            YEAR<span style="color: red;">*</span>
                                            {{ form.year }}
                                            {{ form.year.errors }}
                                        </div>


                                        <div class="col-md-12">
                                            <hr />
                                            <h4>Order Summary</h4>
                                            {#                                        <h4>YAPJOY VENDOR SUBSCRIPTION</h4>#}
                                            <p>{{ package.tokens }} YapJoy Tokens</p>
                                            <table class="table table-condensed table-striped">
                                                <tr>
                                                    <th width="50%">PRICE</th>
                                                    <th width="50%">USD ${{ package.amount }}.00</th>
                                                </tr>
                                                <tr>
                                                    <th width="50%">TAX</th>
                                                    <th width="50%">USD $0.00</th>
                                                </tr>


                                            </table>
                                            <hr />
                                            <table class="table table-condensed table-striped">
                                                <tr>
                                                    <th width="50%">TOTAL</th>
                                                    <th width="50%">USD ${{ package.amount }}.00</th>
                                                </tr>
                                            </table>

                                            <a class="btn btn-default btn-primary btn-block" style="margin-bottom: 10px;" id="submit-invoice">COMPLETE ORDER</a>
                                            <h4 style="color: #07A6C3;" class="text-center"><a href="{% url "vendors__storelisting" %}">< Return To Invoice Details</a></h4>
                                        </div>
                                       </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div><!--vd_content-wrapper-->
                <!-- .vd_container -->
            </div>
            <!-- .vd_content-wrapper -->
        </div>
    </div>

{% endblock content %}

{% block script %}
    <script src="https://js.stripe.com/v1/" type="text/javascript"></script>
    <script>


        {#     {% if not is_customer %}#}
        // alert('working');
        var key = '{{ key }}';
        Stripe.setPublishableKey(key);
        $('#submit-invoice').on('click', function (event) {
            event.preventDefault();
            $('#submit-invoice').attr('disabled', true);
            //alert('submit');
            $("#stripe-error-message").html("");
            if ($("#id_number").length == 1) {
                // alert('inside');
                var form = this;
                var card = {
                    number: $("#id_number").val(),
                    expMonth: $("#id_month").val(),
                    expYear: $("#id_year").val(),
                    {#                    cvc: $("#id_verification_value").val()#}
                };
                //console.log(card);
                Stripe.card.createToken(card, function (status, response) {
                    if (status === 200) {
                        console.log(status, response);
                        //jQuery("#credit-card-errors").hide();
                        //jQuery("#last_4_digits").val(response.card.last4);
                        $("#stripe_token").val(response.id);
                        //jQuery('#setupPayment').prop('disabled', false);
                        {#                        $('#submit-invoice').removeAttr('disabled');#}
                        $('#invoice-form').submit();
                    } else {
                        console.log(response.error);
                        console.log(response.error.param);
                        $("#stripe-error-message").text(response.error.message);
                        $('#submit-invoice').removeAttr('disabled');
                    }
                });
                return false;
            }
            return true;
        });
        {#        {% endif %}#}
        {% if redirect %}
            parent.window.location.href = '/dashboard/';
        {% endif %}

        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-68785620-1', 'auto');
        ga('send', 'pageview');

    </script>

{% endblock script %}
